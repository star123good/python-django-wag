==========================================
Wagtail 0.8 release notes - IN DEVELOPMENT
==========================================

.. contents::
    :local:
    :depth: 1


What's new
==========



Minor features
~~~~~~~~~~~~~~

 * Page operations (creation, publishing, copying etc) are now logged via Python's ``logging`` framework; to configure this, add a logger entry for ``'wagtail'`` or ``'wagtail.core'`` to the ``LOGGING`` setup in your settings file.
 * The save/publish/submit buttons on the page edit page now redirects the user back to the edit page instead of the explorer
 * Signal handlers for ``wagtail.wagtailsearch`` and ``wagtail.contrib.wagtailfrontendcache`` are now automatically registered when using Django 1.7 or above.
 * Added a Django 1.7 system check to ensure that foreign keys from Page models are set to ``on_delete=SET_NULL``, to prevent inadvertent (and tree-breaking) page deletions
 * Improved error reporting on image upload, including ability to set a maximum file size via a new setting ``WAGTAILIMAGES_MAX_UPLOAD_SIZE``


Bug fixes
~~~~~~~~~

 * Replaced references of .username with .get_username() on users for better custom user model support
 * Unpinned dependency versions for six and requests to help prevent dependency conflicts
 * Fixed TypeError when getting embed HTML with oembed on Python 3
 * Made HTML whitelisting in rich text fields more robust at catching disallowed URL schemes such as ``jav\tascript:``
 * ``created_at`` timestamps on page revisions were not being preserved on page copy, causing revisions to get out of sequence
 * When copying pages recursively, revisions of sub-pages were being copied regardless of the ``copy_revisions`` flag
 * Updated the migration dependencies within the project template to ensure that Wagtail's own migrations consistently apply first
 * The cache of site root paths is now cleared when a site is deleted
 * Search indexing now prevents pages from being indexed multiple times, as both the base Page model and the specific subclass
 * Search indexing now avoids trying to index abstract models
 * Fixed references to "username" in login form help text for better custom user model support
 * Later items in a model's search_field list now consistently override earlier items, allowing subclasses to redefine rules from the parent
 * Image uploader now accepts JPEG images that PIL reports as being in MPO format
 * Multiple checkbox fields on form-builder forms did not correctly save multiple values
 * Editing a page's slug and saving it without publishing could sometimes cause the URL paths of child pages to be corrupted

Upgrade considerations
======================

Corrupted URL paths may need fixing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This release fixes a bug in Wagtail 0.7 where editing a parent page's slug could cause the URL paths of child pages to become corrupted. To ensure that your database does not contain any corrupted URL paths, it is recommended that you run ``./manage.py set_url_paths`` after upgrading.

Automatic registration of signal handlers (Django 1.7+)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Signal handlers for the ``wagtailsearch`` core app and ``wagtailfrontendcache`` contrib app are automatically registered when using Django 1.7. Calls to ``register_signal_handlers`` from your ``urls.py`` can be removed.

{% extends "wagtailadmin/base.html" %}
{% block titletag %}Search Terms{% endblock %}
{% block bodyclass %}page-explorer{% endblock %}

{% block content %}
    <header>
        <div class="row row-flush">
            <div class="left col9">
                <h1>Editor's Search Picks</h1>
            </div>
            <div class="right col3">
                <a href="{% url 'wagtailsearch_editorspicks_add' %}" class="button icon icon-plus-inverse">Add new editors pick</a>
            </div>
        </div>
    </header>


    <table class="listing full-width">
        <col />
        <col width="40%"/>
        <col />
        <thead>
            <tr>
                <th class="title">Search term(s)</th>
                <th>Editors picks</th>
                <th>Views (past week)</th>
            </tr>
        </thead>
        <tbody>
            {% if queries %}
                {% for query in queries %}
                    <tr>
                        <td class="title">
                            <h2><a href="{% url 'wagtailsearch_editorspicks_edit' query.id %}" title="Edit this pick">{{ query.query_string }}</a></h2>
                        </td>
                        <td>
                            {% for editors_pick in query.editors_picks.all %}
                                <a href="{% url 'wagtailadmin_pages_edit' editors_pick.page.id %}" class="nolink">{{ editors_pick.page.title }}</a>{% if not forloop.last %}, {% endif %}
                            {% empty %}
                                None
                            {% endfor %}
                        </td>
                        <td>{{ query.hits }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr><td colspan="3" class="no-results-message"><p>No editors picks have been added. Why not <a href="{% url 'wagtailsearch_editorspicks_add' %}">add one</a>?</td></tr>
            {% endif %}
        </tbody>
    </table>
{% endblock %}